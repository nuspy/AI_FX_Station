<mxfile host="app.diagrams.net" modified="2025-01-18T00:00:00.000Z" agent="ForexGPT" etag="COMPLETE_SYSTEM_v1" version="24.0.0">
  <diagram name="Complete System Overview" id="complete-system">
    <mxGraphModel dx="2000" dy="1200" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="2000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- TITLE -->
        <mxCell id="title" value="ForexGPT - Complete System Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=28;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="800" height="40" as="geometry" />
        </mxCell>
        
        <!-- LAYER 1: DATA SOURCES -->
        <mxCell id="layer1-title" value="LAYER 1: DATA SOURCES" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="1520" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="market-data" value="Market Data Service&#xa;• OHLCV (1m, 5m, 15m, 30m, 1h, 4h)&#xa;• Volume Profile&#xa;• Tick Data&#xa;• DB: market_data_candles" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="60" y="130" width="200" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="order-book" value="Order Book Data&#xa;• DOM (Depth of Market)&#xa;• Best Bid/Ask&#xa;• Order Flow&#xa;• Imbalance Detection" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="280" y="130" width="200" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="sentiment-data" value="Sentiment Data&#xa;• News Sentiment (FinBERT)&#xa;• Social Media (Twitter/Reddit)&#xa;• VIX / Fear Index&#xa;• Market Regime" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="500" y="130" width="200" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="broker-data" value="Broker Integration&#xa;• Position Manager&#xa;• Account Balance&#xa;• Open Orders&#xa;• Trade History" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="720" y="130" width="200" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="economic-calendar" value="Economic Calendar&#xa;• News Events&#xa;• Central Bank Decisions&#xa;• Economic Indicators&#xa;• Market Hours" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="940" y="130" width="200" height="120" as="geometry" />
        </mxCell>
        
        <!-- LAYER 2: FEATURE ENGINEERING -->
        <mxCell id="layer2-title" value="LAYER 2: FEATURE ENGINEERING" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="280" width="1520" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="technical-indicators" value="Technical Indicators (18+)&#xa;• ATR, RSI, MACD, Bollinger&#xa;• Stochastic, CCI, Williams%R&#xa;• ADX, MFI, OBV, TRIX&#xa;• Ultimate, Donchian, Keltner&#xa;• EMA, SMA, Hurst, VWAP" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="60" y="330" width="280" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="pattern-recognition" value="Pattern Recognition&#xa;• Candlestick Patterns (50+)&#xa;• Chart Patterns (H&amp;S, Triangles)&#xa;• Harmonic Patterns (Gartley, Bat)&#xa;• Fibonacci Levels&#xa;• Support/Resistance" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="360" y="330" width="280" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="vision-encoding" value="Vision Encoding (LDM4TS)&#xa;• SEG (Segmentation Grammar)&#xa;• GAF (Gramian Angular Field)&#xa;• RP (Recurrence Plot)&#xa;• OHLCV → RGB [3, 224, 224]&#xa;• Vision Transformer Ready" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="660" y="330" width="280" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="additional-features" value="Additional Features&#xa;• Returns &amp; Volatility (RV)&#xa;• Trading Sessions (Tokyo/London/NY)&#xa;• Volume Profile Analysis&#xa;• Order Flow Imbalance&#xa;• Regime Detection" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="960" y="330" width="280" height="140" as="geometry" />
        </mxCell>
        
        <!-- LAYER 3: FORECASTING MODELS -->
        <mxCell id="layer3-title" value="LAYER 3: FORECASTING MODELS" style="text;html=1;strokeColor=none;fillColor=#e1d5e7;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="500" width="1520" height="30" as="geometry" />
        </mxCell>
        
        <!-- Diffusion Models -->
        <mxCell id="diffusion-models" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="60" y="550" width="620" height="260" as="geometry" />
        </mxCell>
        
        <mxCell id="diffusion-title" value="DIFFUSION FORECASTING" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="220" y="560" width="300" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="diffusion-base" value="Diffusion Base&#xa;• DDPM/DDIM Sampling&#xa;• Multi-Horizon (1-90m)&#xa;• Quantile Predictions&#xa;• Basic Parameters" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="80" y="600" width="180" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="diffusion-advanced" value="Diffusion Advanced&#xa;• Enhanced Sampling&#xa;• Feature Weights&#xa;• Regime Conditioning&#xa;• Advanced Parameters" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="280" y="600" width="180" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="sssd" value="SSSD (State Space)&#xa;• Structured State Space&#xa;• Diffusion Backbone&#xa;• Efficient Sampling&#xa;• Long Sequences" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="480" y="600" width="180" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="diffusion-ensemble" value="Ensemble Output&#xa;• Mean/Median Aggregation&#xa;• Uncertainty Quantification&#xa;• Confidence Intervals&#xa;• q05, q50, q95" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="80" y="720" width="580" height="70" as="geometry" />
        </mxCell>
        
        <!-- LDM4TS Models -->
        <mxCell id="ldm4ts-models" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="720" y="550" width="520" height="260" as="geometry" />
        </mxCell>
        
        <mxCell id="ldm4ts-title" value="LDM4TS (VISION-ENHANCED)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#9C27B0;" vertex="1" parent="1">
          <mxGeometry x="820" y="560" width="320" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="ldm4ts-vae" value="VAE Encoder/Decoder&#xa;• Stable Diffusion VAE&#xa;• RGB → Latent [4, 28, 28]&#xa;• Frozen Weights" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="740" y="600" width="160" height="90" as="geometry" />
        </mxCell>
        
        <mxCell id="ldm4ts-unet" value="U-Net Diffusion&#xa;• Cross-Attention&#xa;• Conditioning (Freq+Text)&#xa;• 50 Denoising Steps&#xa;• Trainable" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="920" y="600" width="150" height="90" as="geometry" />
        </mxCell>
        
        <mxCell id="ldm4ts-temporal" value="Temporal Fusion&#xa;• Multi-Head Attention&#xa;• Horizon Prediction&#xa;• Future Prices" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1090" y="600" width="130" height="90" as="geometry" />
        </mxCell>
        
        <mxCell id="ldm4ts-output" value="Monte Carlo Output&#xa;• 50 Samples per Forecast&#xa;• Mean, Std, Quantiles&#xa;• Uncertainty Quantification&#xa;• Purple Chart Lines" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="740" y="720" width="480" height="70" as="geometry" />
        </mxCell>
        
        <!-- Arrows Layer 1 to 2 -->
        <mxCell id="arrow-market-to-ti" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="market-data" target="technical-indicators">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-market-to-pattern" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="market-data" target="pattern-recognition">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-market-to-vision" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9C27B0;" edge="1" parent="1" source="market-data" target="vision-encoding">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-orderbook-to-features" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="order-book" target="additional-features">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-sentiment-to-features" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="sentiment-data" target="additional-features">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Arrows Layer 2 to 3 -->
        <mxCell id="arrow-ti-to-diffusion" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="technical-indicators" target="diffusion-base">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-pattern-to-diffusion" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="pattern-recognition" target="diffusion-advanced">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-vision-to-ldm4ts" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#9C27B0;" edge="1" parent="1" source="vision-encoding" target="ldm4ts-vae">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-features-to-sssd" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="additional-features" target="sssd">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- LDM4TS Internal Flow -->
        <mxCell id="arrow-vae-to-unet" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9C27B0;" edge="1" parent="1" source="ldm4ts-vae" target="ldm4ts-unet">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-unet-to-temporal" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9C27B0;" edge="1" parent="1" source="ldm4ts-unet" target="ldm4ts-temporal">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- LAYER 4: SIGNAL INTELLIGENCE -->
        <mxCell id="layer4-title" value="LAYER 4: SIGNAL INTELLIGENCE &amp; FUSION" style="text;html=1;strokeColor=none;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="840" width="1520" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="signal-fusion" value="Unified Signal Fusion&#xa;• Multi-Model Aggregation&#xa;• Confidence Weighting&#xa;• Directional Consensus&#xa;• Strength Scoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;align=left;verticalAlign=top;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="890" width="280" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="quality-scorer" value="Signal Quality Scorer&#xa;• LDM4TS Uncertainty Filter&#xa;• Pattern Confirmation&#xa;• Multi-Timeframe Alignment&#xa;• Market Regime Validation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="360" y="890" width="280" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="sentiment-fusion" value="Sentiment Integration&#xa;• FinBERT Sentiment Score&#xa;• VIX Fear Index&#xa;• News Impact Analysis&#xa;• Social Media Signals" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="660" y="890" width="280" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="orderflow-fusion" value="Order Flow Analysis&#xa;• DOM Imbalance&#xa;• Volume Delta&#xa;• Absorption Detection&#xa;• Liquidity Zones" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="960" y="890" width="280" height="120" as="geometry" />
        </mxCell>
        
        <!-- Arrows Layer 3 to 4 -->
        <mxCell id="arrow-diffusion-to-fusion" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="diffusion-ensemble" target="signal-fusion">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-ldm4ts-to-quality" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#9C27B0;" edge="1" parent="1" source="ldm4ts-output" target="quality-scorer">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- LAYER 5: RISK & PORTFOLIO MANAGEMENT -->
        <mxCell id="layer5-title" value="LAYER 5: RISK &amp; PORTFOLIO MANAGEMENT" style="text;html=1;strokeColor=none;fillColor=#ffe6cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="1040" width="1520" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="risk-manager" value="Risk Manager&#xa;• Position Sizing (Kelly, Fixed %)&#xa;• Stop Loss / Take Profit&#xa;• Max Drawdown Control&#xa;• Daily Loss Limits&#xa;• Correlation Analysis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;align=left;verticalAlign=top;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="1090" width="360" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="portfolio-manager" value="Portfolio Manager (Riskfolio-Lib)&#xa;• Mean-Variance Optimization&#xa;• Risk Parity Allocation&#xa;• Black-Litterman Model&#xa;• CVaR Optimization&#xa;• Multi-Asset Balancing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;align=left;verticalAlign=top;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="440" y="1090" width="360" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="exposure-manager" value="Exposure Manager&#xa;• Currency Exposure Tracking&#xa;• Pair Correlation Matrix&#xa;• Hedging Strategies&#xa;• Leverage Control&#xa;• Margin Requirements" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="820" y="1090" width="360" height="140" as="geometry" />
        </mxCell>
        
        <!-- Arrows Layer 4 to 5 -->
        <mxCell id="arrow-fusion-to-risk" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="signal-fusion" target="risk-manager">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-quality-to-portfolio" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="quality-scorer" target="portfolio-manager">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-sentiment-to-exposure" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="sentiment-fusion" target="exposure-manager">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- LAYER 6: DECISION MAKER -->
        <mxCell id="layer6-title" value="LAYER 6: DECISION MAKER &amp; EXECUTION" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="1260" width="1520" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="decision-maker" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="200" y="1310" width="1000" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="decision-title" value="AUTOMATED TRADING ENGINE - DECISION MAKER" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="350" y="1320" width="700" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="decision-logic" value="Decision Logic&#xa;1. Signal Quality Check (threshold: 65%)&#xa;2. Risk Validation (account balance, drawdown)&#xa;3. Portfolio Constraints (max positions, correlation)&#xa;4. Market Hours Check (Forex open/close)&#xa;5. News Event Filter (high-impact events)&#xa;6. Position Sizing Calculation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="220" y="1360" width="280" height="130" as="geometry" />
        </mxCell>
        
        <mxCell id="execution-router" value="Execution Router&#xa;• Entry Signal → Market/Limit Order&#xa;• Exit Signal → Close Position&#xa;• Modify Order (SL/TP updates)&#xa;• Emergency Stop (drawdown limit)&#xa;• Broker API (MT5/OANDA/IB)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="520" y="1360" width="280" height="130" as="geometry" />
        </mxCell>
        
        <mxCell id="monitoring" value="Monitoring &amp; Logging&#xa;• Trade Journal (DB storage)&#xa;• Performance Metrics (Sharpe, Win%)&#xa;• Real-time Alerts (Discord/Email)&#xa;• Backtest Comparison&#xa;• Error Tracking (Sentry)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="820" y="1360" width="360" height="130" as="geometry" />
        </mxCell>
        
        <!-- Arrows Layer 5 to 6 -->
        <mxCell id="arrow-risk-to-decision" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#006600;" edge="1" parent="1" source="risk-manager" target="decision-maker">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-portfolio-to-decision" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#006600;" edge="1" parent="1" source="portfolio-manager" target="decision-maker">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-exposure-to-decision" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#006600;" edge="1" parent="1" source="exposure-manager" target="decision-maker">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Output to Broker -->
        <mxCell id="broker-execution" value="BROKER EXECUTION&#xa;(MT5 / OANDA / Interactive Brokers)&#xa;&#xa;✓ Market Orders&#xa;✓ Pending Orders&#xa;✓ Position Management&#xa;✓ Real-time P&amp;L" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;align=center;verticalAlign=middle;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="450" y="1550" width="500" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-decision-to-broker" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=4;strokeColor=#CC0000;" edge="1" parent="1" source="decision-maker" target="broker-execution">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="execution-label" value="TRADE EXECUTION" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#CC0000;" vertex="1" parent="1">
          <mxGeometry x="650" y="1520" width="100" height="20" as="geometry" />
        </mxCell>
        
        <!-- LEGEND -->
        <mxCell id="legend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="1280" y="130" width="280" height="340" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-title" value="LEGEND" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1350" y="140" width="140" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-diffusion" value="Diffusion Models" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1300" y="180" width="240" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-ldm4ts" value="LDM4TS Vision Models" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;fontColor=#9C27B0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1300" y="220" width="240" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-data" value="Data Sources" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1300" y="260" width="240" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-features" value="Feature Engineering" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1300" y="300" width="240" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-signals" value="Signal Intelligence" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1300" y="340" width="240" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-risk" value="Risk Management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1300" y="380" width="240" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-decision" value="Decision &amp; Execution" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1300" y="420" width="240" height="30" as="geometry" />
        </mxCell>
        
        <!-- FOOTER -->
        <mxCell id="footer" value="ForexGPT v2.0 - Complete System Architecture | LDM4TS Vision-Enhanced Forecasting | Automated Trading Engine" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=2;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="300" y="1700" width="1000" height="30" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
